
@model JanSamadhan.Models.Issue

@{
    ViewData["Title"] = "Issue Details";
}

<h1>Issue Details</h1>

<div>
    <h4>@Model.Title</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Description
        </dt>
        <dd class="col-sm-10">
            @Model.Description
        </dd>
        <dt class="col-sm-2">
            Status
        </dt>
        <dd class="col-sm-10">
            @if (Model.Replies != null && Model.Replies.Any())
            {
                <span class="badge badge-success">Replied</span>
            }
            else
            {
                <span class="badge badge-warning">Pending</span>
            }
        </dd>
        @if (!string.IsNullOrEmpty(Model.RelatedImageUrl))
        {
            <dt class="col-sm-2">
                Related Image
            </dt>
            <dd class="col-sm-10">
                <img src="~/images/@Model.RelatedImageUrl" class="img-fluid" alt="Issue Image">
            </dd>
        }
    </dl>
</div>

<hr />

<h3>Replies</h3>

@if (Model.Replies != null && Model.Replies.Any())
{
    @foreach (var reply in Model.Replies)
    {
        <div class="card mb-3">
            <div class="card-body">
                <p class="card-text">@reply.Description</p>
                @if (!string.IsNullOrEmpty(reply.AttachImage))
                {
                    <img src="~/images/@reply.AttachImage" class="img-fluid" alt="Reply Image">
                }
            </div>
            <div class="card-footer text-muted">
                Replied by Officer on @reply.CreatedAt.ToString("g")
            </div>
        </div>
    }
}
else
{
    <p>No replies yet.</p>
}

<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
    <a asp-action="Index">Back to List</a> |
    <a asp-action="Delete" asp-route-id="@Model.Id">Delete</a>
</div>
